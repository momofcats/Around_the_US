(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"},24:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),c=a.n(r),i=(a(29),a(22)),l=a(5),s=a(1),u=a(18),m=a.n(u);var p=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("img",{src:m.a,alt:"logo",className:"header__logo"}))},d=Object(n.createContext)();var _=function(e){var t=o.a.useContext(d),a=e.card,n=a.owner._id===t._id,r=a.likes.some((function(e){return e._id===t._id}))?"card__like card__like_active":"card__like";return o.a.createElement("li",{className:"card"},n?o.a.createElement("button",{type:"button",className:"button card__del",onClick:function(){e.onCardDelete(a)}}):"",o.a.createElement("div",{className:"card__img",style:{backgroundImage:"url(".concat(a.link,")")},onClick:function(){e.onCardClick(a)}}),o.a.createElement("div",{className:"card__description-wrapper"},o.a.createElement("h2",{className:"card__title"},a.name),o.a.createElement("div",{className:"card__likes-container"},o.a.createElement("button",{className:"".concat(r," button "),onClick:function(){e.onCardLike(a)}}),o.a.createElement("p",{className:"card__likes"},a.likes.length))))};var f=function(e){var t=o.a.useContext(d);return o.a.createElement("main",null,o.a.createElement("section",{className:"profile page__section"},o.a.createElement("div",{className:"media"},o.a.createElement("div",{className:"media__image-container"},o.a.createElement("img",{alt:"profile",className:"media__image",src:t.avatar}),o.a.createElement("button",{onClick:e.onEditAvatar,className:"media__btn media__btn_size_lg media__btn_hoverable",type:"button"})),o.a.createElement("div",{className:"media__body"},o.a.createElement("div",{className:"media__item"},o.a.createElement("h1",{className:"media__name"},t.name),o.a.createElement("button",{onClick:e.onEditProfile,className:"media__btn media__btn_size_sm button",type:"button"})),o.a.createElement("p",{className:"media__job"},t.about))),o.a.createElement("button",{onClick:e.onAddPlace,className:"profile__btn button",type:"button"})),o.a.createElement("ul",{className:"gallery page__section"},e.cards.map((function(t,a){return o.a.createElement(_,{key:a,card:t,onCardDelete:e.onCardDelete,onCardClick:e.onCardClick,onCardLike:e.onCardLike})}))))};var b=function(){return o.a.createElement("footer",{className:"footer page__section"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Around The U.S."))},h=a(8);a(30);var E=function(){return o.a.createElement("section",{className:"authentication page__section"},o.a.createElement("div",{className:"authentication__container"},o.a.createElement("form",null,o.a.createElement("h2",{className:"form__title form__title_theme_light"},"Log in"),o.a.createElement("input",{className:"form__input form__input_theme_light",placeholder:"Email",type:"email",required:!0}),o.a.createElement("input",{className:"form__input form__input_theme_light",placeholder:"Password",type:"password",required:!0}),o.a.createElement("button",{type:"submit",className:"form__submit-btn form__submit-btn_theme_light"},"Log in")),o.a.createElement("div",{className:"authentication__link"},o.a.createElement("span",null,"Not a member yet?"),o.a.createElement(h.b,{to:"#"},"Sign up here!"))))};var v=function(e){return o.a.createElement("div",{className:"popup popup_background_light js-popup-".concat(e.name," ").concat(e.isOpen?"popup_role_show":"popup_role_fade-out"),onClick:function(t){t.target.classList.contains("popup_role_show")&&e.onClose()}},o.a.createElement("div",{className:"popup__container popup__container_type_form"},o.a.createElement("button",{className:"popup__btn-close button",type:"button",onClick:e.onClose}),o.a.createElement("form",{className:"form",action:"#",noValidate:!0,name:e.name,onSubmit:e.onSubmit},o.a.createElement("h2",{className:"form__title"},e.title),e.children,o.a.createElement("button",{className:"form__submit-btn",type:"submit","data-text":"Save"},e.buttonText))))};var g=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),u=s[0],m=s[1],p=Object(n.useContext)(d);function _(e){var t=e.target,a=t.name,n=t.value;switch(a){case"name":c(n);break;case"about":m(n)}}return Object(n.useEffect)((function(){p.name&&c(p.name),p.about&&m(p.about)}),[p]),o.a.createElement(v,{name:"profile",title:"Edit profile",buttonText:"Save",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:r,about:u})}},o.a.createElement("input",{required:!0,pattern:"[a-zA-Z\\s\\-]+",type:"text",value:r,className:"form__input js-input-name",name:"name",placeholder:"Name",onChange:_,minLength:"2",maxLength:"40"}),o.a.createElement("input",{required:!0,type:"text",value:u,className:"form__input js-input-job",name:"about",placeholder:"About me",onChange:_,minLength:"2",maxLength:"200"}))};var k=function(e){var t=Object(n.useRef)(null);return o.a.createElement(v,{name:"change-avatar",title:"Change profile picture",buttonText:"Save",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})}},o.a.createElement("input",{type:"url",className:"form__input js-input-link",name:"avatar",placeholder:"Url",ref:t,required:!0}))};var C=function(e){var t=Object(n.useRef)(null),a=Object(n.useRef)(null);return o.a.createElement(v,{name:"photo-form",title:"New Place",buttonText:"Create",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onAddPlace({name:a.current.value,link:t.current.value})}},o.a.createElement("input",{type:"text",ref:a,className:"form__input js-input-title",name:"name",placeholder:"Title",minLength:"1",maxLength:"30",required:!0}),o.a.createElement("input",{ref:t,type:"url",className:"form__input js-input-link",name:"link",placeholder:"Image link",required:!0}))};var N=function(e){var t=e.card;return o.a.createElement("div",{className:"popup popup_background_dark js-popup-picture ".concat(e.isOpen?"popup_role_show":"popup_role_fade-out"),onClick:function(t){t.target.classList.contains("popup_role_show")&&e.onClose()}},o.a.createElement("div",{className:"popup__container popup__container_type_picture"},o.a.createElement("button",{className:"popup__btn-close button",type:"button",onClick:e.onClose}),o.a.createElement("img",{className:"popup__image",src:t.link,alt:t.name}),o.a.createElement("h2",{className:"popup__title"},t.name)))},O=a(20),j=a(21),y=new(function(){function e(t){Object(O.a)(this,e),this.options=t}return Object(j.a)(e,[{key:"getInitialCards",value:function(){return this.request("/cards")}},{key:"getUserInfo",value:function(){return this.request("/users/me")}},{key:"getAppInfo",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}},{key:"addLike",value:function(e){return this.request("/cards/likes/".concat(e),"PUT")}},{key:"removeLike",value:function(e){return this.request("/cards/likes/".concat(e),"DELETE")}},{key:"delCard",value:function(e){return this.request("/cards/".concat(e),"DELETE")}},{key:"updateUserInfo",value:function(e){return this.request("/users/me","PATCH",JSON.stringify({name:e.name,about:e.about}))}},{key:"updateAvatar",value:function(e){return this.request("/users/me/avatar","PATCH",JSON.stringify({avatar:e.avatar}))}},{key:"postNewCard",value:function(e){return this.request("/cards/","POST",JSON.stringify({name:e.name,link:e.link}))}},{key:"request",value:function(e,t,a){return fetch("".concat(this.options.baseUrl).concat(e),{headers:this.options.headers,method:t,body:a}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-2",headers:{authorization:"2ea24103-3839-4671-8e47-57675e6fba9c","Content-Type":"application/json"}});a(23);var S=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),u=Object(l.a)(c,2),m=u[0],_=u[1],h=Object(n.useState)(!1),v=Object(l.a)(h,2),O=v[0],j=v[1],S=Object(n.useState)(!1),w=Object(l.a)(S,2),L=w[0],x=w[1],q=Object(n.useState)(0),A=Object(l.a)(q,2),U=A[0],P=A[1],T=Object(n.useState)({}),I=Object(l.a)(T,2),D=I[0],J=I[1],z=Object(n.useState)([]),R=Object(l.a)(z,2),B=R[0],H=R[1],W=Object(n.useState)(!1),F=Object(l.a)(W,2),M=F[0];function V(e,t){var a=B.map((function(a){return a._id===e?t:a}));H(a)}function Z(){j(!1),r(!1),_(!1),x(!1),P(0)}function $(e){"Escape"===e.key&&Z()}return F[1],Object(n.useEffect)((function(){y.getUserInfo().then((function(e){J(e)})).catch(console.log)}),[]),Object(n.useEffect)((function(){y.getInitialCards().then((function(e){H(e)})).catch(console.log)}),[]),Object(n.useEffect)((function(){return document.addEventListener("keydown",$),function(){document.removeEventListener("keydown",$)}})),o.a.createElement(o.a.Fragment,null,o.a.createElement(p,null),o.a.createElement(d.Provider,{value:D},o.a.createElement(s.d,null,o.a.createElement(s.b,{exact:!0,path:"/"},M?o.a.createElement(f,{onEditProfile:function(){r(!0)},onAddPlace:function(){_(!0)},onEditAvatar:function(){j(!0)},onCardClick:function(e){P(e),x(!0)},cards:B,onCardDelete:function(e){y.delCard(e._id).then((function(t){var a=B.filter((function(t){return t._id!==e._id}));H(a)}))},onCardLike:function(e){e.likes.some((function(e){return e._id===D._id}))?y.removeLike(e._id).then((function(t){V(e._id,t)})):y.addLike(e._id).then((function(t){V(e._id,t)}))}}):o.a.createElement(s.a,{to:"/signin"})),o.a.createElement(s.b,{exact:!0,path:"/signin"},o.a.createElement(E,null))),M&&o.a.createElement(b,null),o.a.createElement(g,{isOpen:a,onClose:Z,onUpdateUser:function(e){y.updateUserInfo(e).then((function(e){J(e)})).catch(console.log),Z()}}),o.a.createElement(C,{isOpen:m,onClose:Z,onAddPlace:function(e){y.postNewCard(e).then((function(e){H([e].concat(Object(i.a)(B)))})).catch(console.log),console.log(B),Z()}}),o.a.createElement(k,{isOpen:O,onClose:Z,onUpdateAvatar:function(e){y.updateAvatar(e).then((function(e){J(e)})).catch(console.log),Z()}}),o.a.createElement(N,{isOpen:L,onClose:Z,card:U})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(h.a,null,o.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.bc1521ea.chunk.js.map